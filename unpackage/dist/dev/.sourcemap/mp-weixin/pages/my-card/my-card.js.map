{"version":3,"sources":["uni-app:///main.js","webpack:////Users/chuanchuan/Documents/uni-app_study/uni-app/studentProject/pages/my-card/my-card.vue?3850","webpack:////Users/chuanchuan/Documents/uni-app_study/uni-app/studentProject/pages/my-card/my-card.vue?87ff","webpack:////Users/chuanchuan/Documents/uni-app_study/uni-app/studentProject/pages/my-card/my-card.vue?94ff","webpack:////Users/chuanchuan/Documents/uni-app_study/uni-app/studentProject/pages/my-card/my-card.vue?c5a3","uni-app:///pages/my-card/my-card.vue","webpack:////Users/chuanchuan/Documents/uni-app_study/uni-app/studentProject/pages/my-card/my-card.vue?ad86","webpack:////Users/chuanchuan/Documents/uni-app_study/uni-app/studentProject/pages/my-card/my-card.vue?c816"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,iG,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACqC;;;AAG3F;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAo1B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgDx2B;AACA;AACA;AACA,gD;;AAEA;AACA,iBADA;AAEA,MAFA,kBAEA;AACA;AACA,iBADA;AAEA,kBAFA;AAGA,gBAHA;AAIA,mBAJA;AAKA,kDALA;AAMA,oBANA;;AAQA,GAXA;AAYA;AACA,sBADA;AAEA,sBAFA,EAZA;;AAgBA,QAhBA,oBAgBA;AACA;AACA,GAlBA;AAmBA;AACA;AACA,oEADA;AAEA,oEAFA;AAGA,iEAHA,GADA,CAnBA;;;AA0BA;AACA,8GADA;AAEA,UAFA,oBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,EAMA,KANA,CAMA;AACA;AACA,SARA;AASA;AACA,KAfA;AAgBA,WAhBA,qBAgBA;AACA;AACA;AACA,iCADA;AAEA,uBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,WATA;AAUA;AACA;AACA,WAZA;;AAcA,OAfA,MAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAPA;;AASA;AACA,KA3CA;AA4CA,SA5CA,mBA4CA;AACA;AACA,0BADA;AAEA;AACA;AACA,+BADA;AAEA,cAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aARA,EAQA,KARA,CAQA;AACA;AACA,aAVA;AAWA;AACA,2BADA;AAEA,0BAFA;;AAIA,WA1BA;AA2BA,SA9BA;AA+BA,YA/BA,kBA+BA;AACA;AACA,+BADA;;AAGA,SAnCA;;AAqCA,KAlFA;AAmFA,WAnFA,qBAmFA;AACA;AACA;AACA;AACA;AACA,KAxFA;AAyFA,UAzFA,oBAyFA;AACA;AACA;AACA,6BADA;;AAGA,OAJA,MAIA;AACA;AACA,uBADA;AAEA,sBAFA;;AAIA;AACA,KApGA;AAqGA,UArGA,oBAqGA;AACA;AACA,wBADA;AAEA,oBAFA;;AAIA,KA1GA;AA2GA,UA3GA,oBA2GA;AACA;AACA,qDADA;;AAGA,KA/GA,GA1BA,E;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA+tC,CAAgB,0nCAAG,EAAC,C;;;;;;;;;;;ACAnvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/my-card/my-card.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/my-card/my-card.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./my-card.vue?vue&type=template&id=76160fac&scoped=true&\"\nvar renderjs\nimport script from \"./my-card.vue?vue&type=script&lang=js&\"\nexport * from \"./my-card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my-card.vue?vue&type=style&index=0&id=76160fac&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76160fac\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my-card/my-card.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-card.vue?vue&type=template&id=76160fac&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-card.vue?vue&type=script&lang=js&\"","<!--\n* @name: my-card\n* @author: chuanchuan\n* @date: 2022-06-27 11:04\n* @description: my-card\n* @update: 2022-06-27 11:04\n-->\n\n<template>\n  <view class=\"my-card\">\n    <view class=\"my-header\">\n      <!-- 自定义头部 -->\n      <my-header :isBack=\"false\" hasBgc=\"transparent\" title=\"我的名片\" color=\"#fff\"></my-header>\n      <view class=\"header-main\">\n        <view class=\"main-content\">\n          <image class=\"main-img\" :src=\"avatarUrl\"></image>\n          <view class=\"main\">\n            <view class=\"login\" v-if=\"isLogin\" style=\"position:relative; z-index:999;\">\n              <view @tap=\"goLogin\" class=\"header-name\">授权登录</view>\n            </view>\n            <view class=\"header-name\" v-else>{{ nickName }}</view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <!-- 内容区 -->\n    <view class=\"card-content\">\n      <view class=\"card-item\" @tap=\"goCard\" :myInfo=\"myInfo\">\n        <image class=\"item-img\" src=\"../../static/imgs/my-card.png\"></image>\n        <view class=\"item-card\">名片</view>\n      </view>\n      <view class=\"card-item\" @tap=\"goMess\" :myInfo=\"myInfo\">\n        <image class=\"item-img1\" src=\"../../static/imgs/news.png\"></image>\n        <view class=\"item-card\">消息</view>\n      </view>\n      <view class=\"card-item\" @tap=\"goHelp\" :myInfo=\"myInfo\">\n        <image class=\"item-img2\" src=\"../../static/imgs/customer.png\"></image>\n        <view class=\"item-card\">客服及帮助</view>\n      </view>\n    </view>\n    <my-tabbar :selected=\"selected\"></my-tabbar>\n    <view class=\"mask\" v-if=\"isLogin\"></view>\n  </view>\n</template>\n\n<script>\nimport MyTabbar from '@/components/tabbar/my-tabbar.vue'\nimport MyHeader from '@/components/start-school/my-header/my-header.vue'\nimport {authLogin} from '@/service/login.js'\nimport {stuCurrent} from '@/service/sign.js'\nimport {stuInfo} from '@/service/student.js'\nimport {mapState, mapActions} from 'vuex'\n\nexport default {\n  name: \"my-card\",\n  data() {\n    return {\n      selected: 4,\n      myInfo: null,\n      params: {},\n      isLogin: true,\n      avatarUrl: '../../static/imgs/weidenglu.png',\n      nickName: '川川'\n    }\n  },\n  components: {\n    MyTabbar,\n    MyHeader\n  },\n  onShow() {\n    this.getStu()\n  },\n  computed: {\n    ...mapState({\n      signInfo: state => state.sign.signInfo,\n      userList: state => state.user.userList,\n      student: state => state.user.student\n    })\n  },\n  methods: {\n    ...mapActions(['changeOpenIdActions', 'changeStatus', 'addSignInfoActions', 'changeStudentActions']),\n    getStu() {\n      if (uni.getStorageSync('token')) {\n        // 获取入学的学生信息\n        stuInfo().then(res => {\n          console.log(res)\n          if (!res.name)\n            return\n          this.myInfo = res\n          this.changeStudentActions(res)\n        }).catch(err => {\n          console.log(err, '错误')\n        })\n      }\n    },\n    getUser() {\n      if (wx.getUserProfile) {\n        wx.getUserProfile({\n          desc: '用于获取名片展示用户头像和昵称',\n          lang: 'zh_CN',\n          success: userData => {\n            this.nickName = userData.userInfo.nickName\n            this.params.nickName = userData.userInfo.nickName\n            this.avatarUrl = userData.userInfo.avatarUrl\n            this.params.avatarUrl = userData.userInfo.avatarUrl\n            this.login()\n          },\n          fail: err => {\n            this.isLogin = false\n          }\n        })\n      } else {\n        wx.getUserInfo({\n          success: res => {\n            this.nickName = res.userInfo.nickName\n            this.params.nickName = res.userInfo.nickName\n            this.avatarUrl = res.userInfo.avatarUrl\n            this.params.avatarUrl = res.userInfo.avatarUrl\n            this.login()\n          }\n        })\n      }\n    },\n    login() {\n      uni.login({\n        provider:'weixin',\n        success: loginRes => {\n          authLogin({\n            code: loginRes.code\n          }).then(res => {\n            this.params.openId = res.openId\n            // 把openId保存到vuex\n            this.changeOpenIdActions(this.params)\n            // 存储token到本地\n            uni.setStorageSync('token', res.token)\n            // 获取学生信息\n            this.getStu()\n            // 获取学生协议信息\n            stuCurrent().then(res => {\n              if (res.resultCode === 1020)\n                return\n              res.classProtocolPath = res.classProtocolPath\n              res.signProtocolPath = 'https://fawnuat.xuexiluxian.cn/api' + res.signProtocolPath\n              this.addSignInfoActions(res)\n              // 改变状态\n              this.changeStatus({status: 1})\n            }).catch(err => {\n              console.log(err)\n            })\n            uni.showToast({\n              title: '登录成功',\n              icon: 'none'\n            })\n          })\n        },\n        fail() {\n          uni.showToast({\n            title: '登录失败，请手动登陆',\n            })\n        }\n      })\n    },\n    goLogin() {\n      if (this.isLogin) {\n        this.getUser()\n        this.isLogin = false\n      }\n    },\n    goCard() {\n      if (this.myInfo) {\n        uni.navigateTo({\n          url: '/pages/my/my'\n        })\n      } else {\n        uni.showToast({\n          title: '请先入学',\n          icon: 'none'\n        })\n      }\n    },\n    goMess() {\n      uni.showToast({\n        title: '该功能暂不开放',\n        icon: 'none'\n      })\n    },\n    goHelp() {\n      uni.navigateTo({\n        url: '/pages/cnosulting-help/consulting-help'\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n@import './css/my-card.css'\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-card.vue?vue&type=style&index=0&id=76160fac&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./my-card.vue?vue&type=style&index=0&id=76160fac&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1657536825197\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}